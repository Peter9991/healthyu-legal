<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; img-src 'self' data: https:; connect-src 'self'; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self';">
  <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload">
  <title>HealthyU - Secure Healthy Eating Platform</title>
  
  <!-- Secure external resource loading with integrity checks -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous">
  
  <style>
    /* Security-focused CSS with sanitized inputs */
    :root {
      --primary-color: #2e7d32;
      --secondary-color: #42a5f5;
      --accent-color: #b2ff59;
      --text-color: #222;
      --background-color: #f7f7fa;
      --white: #fff;
    }

    /* Reset and base styles with security considerations */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      scroll-behavior: smooth;
      /* Prevent text selection for sensitive content */
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--background-color);
      color: var(--text-color);
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      height: 100%;
      /* Security: Prevent clickjacking */
      position: relative;
    }

    /* Secure scroll container */
    .snap-container {
      scroll-snap-type: y mandatory;
      overflow-y: scroll;
      height: 100vh;
      /* Prevent horizontal scroll */
      overflow-x: hidden;
    }

    .snap-section {
      scroll-snap-align: start;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      background: rgba(255, 255, 255, 0.95);
      transition: background 0.5s;
      /* Security: Prevent overflow attacks */
      overflow: hidden;
    }

    .snap-section.hero-snap {
      background: linear-gradient(135deg, var(--primary-color) 0%, #1b5e20 100%);
    }

    .snap-section:nth-child(even) {
      background: rgba(255, 255, 255, 0.98);
    }

    /* Secure floating elements */
    .snap-section .floating-emoji {
      position: absolute;
      font-size: 2.5rem;
      opacity: 0.13;
      pointer-events: none;
      z-index: 1;
      animation: floatEmoji 6s infinite linear;
      /* Security: Prevent interaction */
      user-select: none;
      -webkit-user-select: none;
    }

    .snap-section .floating-emoji2 {
      position: absolute;
      font-size: 2.5rem;
      opacity: 0.13;
      pointer-events: none;
      z-index: 1;
      animation: floatEmoji2 7s infinite linear;
      /* Security: Prevent interaction */
      user-select: none;
      -webkit-user-select: none;
    }

    @keyframes floatEmoji {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-30px) rotate(10deg); }
      100% { transform: translateY(0) rotate(0deg); }
    }

    @keyframes floatEmoji2 {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(30px) rotate(-10deg); }
      100% { transform: translateY(0) rotate(0deg); }
    }

    /* Hero section with security */
    .hero {
      min-height: 100vh;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(120deg, #388e3c 0%, var(--secondary-color) 100%);
      padding: 0;
      box-sizing: border-box;
      position: relative;
      /* Security: Prevent overflow */
      overflow: hidden;
    }

    .hero-inner {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      max-width: 1400px;
      gap: 60px;
      padding: 0 5vw;
    }

    .hero-content-block {
      max-width: 600px;
      z-index: 2;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
    }

    .hero-logo {
      width: 320px;
      max-width: 90vw;
      height: auto;
      margin-bottom: 48px;
      margin-top: 32px;
      display: block;
      animation: floatLogo 3s ease-in-out infinite;
      z-index: 2;
      /* Security: Prevent drag and drop attacks */
      -webkit-user-drag: none;
      -khtml-user-drag: none;
      -moz-user-drag: none;
      -o-user-drag: none;
      user-drag: none;
    }

    @keyframes floatLogo {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-18px); }
    }

    .hero-title {
      font-size: 3.5rem;
      font-weight: 900;
      margin-bottom: 18px;
      letter-spacing: 1.2px;
      color: var(--white);
      animation: fadeInUp 1s;
      line-height: 1.1;
      text-shadow: 0 2px 12px rgba(46,125,50,0.08);
    }

    .hero-title .highlight {
      color: var(--accent-color);
    }

    .hero-desc {
      font-size: 1.35rem;
      color: #e3f2fd;
      margin-bottom: 36px;
      animation: fadeInUp 1.2s;
      max-width: 500px;
      font-weight: 500;
    }

    .store-buttons {
      display: flex;
      gap: 18px;
      margin-top: 32px;
      margin-bottom: 0;
    }

    .store-btn {
      display: inline-block;
      height: 54px;
      transition: transform 0.2s;
      /* Security: Prevent drag and drop */
      -webkit-user-drag: none;
      user-drag: none;
    }

    .store-btn:hover {
      transform: scale(1.08);
    }

    .hero-poster-img {
      width: 400px;
      max-width: 90vw;
      height: auto;
      border-radius: 40px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.18);
      background: var(--white);
      margin: 0;
      animation: fadeInUp 1.2s;
      border: 8px solid var(--white);
      object-fit: cover;
      z-index: 2;
      display: block;
      /* Security: Prevent drag and drop */
      -webkit-user-drag: none;
      user-drag: none;
    }

    /* Sectioned layout with security */
    .sectioned {
      width: 100vw;
      max-width: none;
      padding: 0;
      margin: 0;
      background: transparent;
      display: flex;
      flex-direction: column;
      gap: 0;
      /* Security: Prevent overflow */
      overflow: hidden;
    }

    .section-block-split {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 180px;
      padding: 18px 3vw 10px 3vw;
      gap: 18px;
      width: 100vw;
      max-width: none;
      margin: 0 0 2px 0;
      opacity: 1;
      transform: none;
      background: transparent;
    }

    .section-block-split.reverse {
      flex-direction: row-reverse;
    }

    .section-img {
      width: 400px;
      max-width: 100%;
      border-radius: 32px;
      box-shadow: 0 8px 32px rgba(33,150,243,0.13), 0 2px 8px rgba(46,125,50,0.13);
      background: var(--white);
      object-fit: cover;
      margin: 0;
      transition: transform 0.3s, box-shadow 0.3s;
      animation: floatImg 3s infinite alternate;
      position: relative;
      /* Security: Prevent drag and drop */
      -webkit-user-drag: none;
      user-drag: none;
    }

    .section-img:hover {
      transform: scale(1.04) rotate(-2deg);
      box-shadow: 0 16px 48px rgba(33,150,243,0.18), 0 4px 16px rgba(46,125,50,0.18);
    }

    @keyframes floatImg {
      0% { transform: translateY(0); }
      100% { transform: translateY(-10px); }
    }

    .section-text {
      max-width: 480px;
      padding: 0 24px;
      text-align: left;
    }

    .section-title-split {
      font-size: 2.1rem;
      font-weight: 800;
      color: var(--primary-color);
      margin-bottom: 18px;
      letter-spacing: 1px;
    }

    .section-desc-split {
      font-size: 1.15rem;
      color: #444;
      line-height: 1.7;
      margin-bottom: 0;
    }

    /* Fitness calculator images side by side */
    #fitness-section .section-img {
      display: flex;
      flex-direction: row;
      gap: 32px;
      justify-content: center;
      align-items: center;
      background: none;
      box-shadow: none;
      width: auto;
      max-width: 100vw;
    }

    #fitness-section .section-img img {
      width: 220px;
      max-width: 40vw;
      min-width: 120px;
      border-radius: 24px;
      box-shadow: 0 8px 32px rgba(33,150,243,0.13), 0 2px 8px rgba(46,125,50,0.13);
      background: var(--white);
      margin: 0;
      transition: transform 0.3s, box-shadow 0.3s;
      animation: floatImg 3s infinite alternate;
      /* Security: Prevent drag and drop */
      -webkit-user-drag: none;
      user-drag: none;
    }

    #fitness-section .section-img img:hover {
      transform: scale(1.08) rotate(2deg);
      box-shadow: 0 16px 48px rgba(33,150,243,0.18), 0 4px 16px rgba(46,125,50,0.18);
    }

    @media (max-width: 900px) {
      #fitness-section .section-img {
        flex-direction: column;
        gap: 18px;
      }
      #fitness-section .section-img img {
        width: 90vw;
        max-width: 340px;
      }
    }

    /* Policy buttons section */
    .policy-section {
      width: 100vw;
      background: rgba(255, 255, 255, 0.95);
      padding: 80px 0 60px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .policy-title {
      font-size: 2.2rem;
      font-weight: 800;
      color: var(--primary-color);
      margin-bottom: 32px;
      letter-spacing: 1px;
      text-align: center;
    }

    .policy-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 28px;
      justify-content: center;
      align-items: center;
      width: 100%;
      max-width: 900px;
    }

    .policy-btn {
      background: var(--white);
      border: 2px solid var(--primary-color);
      color: var(--primary-color);
      font-size: 1.2rem;
      font-weight: 700;
      border-radius: 18px;
      padding: 22px 38px;
      text-decoration: none;
      box-shadow: 0 4px 16px rgba(33,150,243,0.10);
      transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.2s;
      margin: 0;
      outline: none;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      /* Security: Prevent text selection */
      -webkit-user-select: none;
      user-select: none;
    }

    .policy-btn:hover, .policy-btn:focus {
      background: var(--accent-color);
      color: var(--text-color);
      box-shadow: 0 8px 32px rgba(33,150,243,0.18), 0 4px 16px rgba(46,125,50,0.18);
      transform: scale(1.06) rotate(-2deg);
    }

    .policy-btn:active {
      background: #e3f2fd;
      color: var(--primary-color);
    }

    /* Playful floating emoji with security */
    .floating-emoji {
      position: absolute;
      font-size: 2.5rem;
      opacity: 0.13;
      pointer-events: none;
      z-index: 1;
      animation: floatEmoji 6s infinite linear;
      /* Security: Prevent interaction */
      user-select: none;
      -webkit-user-select: none;
    }

    .floating-emoji2 {
      position: absolute;
      font-size: 2.5rem;
      opacity: 0.13;
      pointer-events: none;
      z-index: 1;
      animation: floatEmoji2 7s infinite linear;
      /* Security: Prevent interaction */
      user-select: none;
      -webkit-user-select: none;
    }

    /* Responsive design with security */
    @media (max-width: 900px) {
      .section-block-split, .section-block-split.reverse {
        flex-direction: column !important;
        gap: 32px;
        min-height: unset;
        padding: 40px 0;
      }
      .section-img, .hero-poster-img {
        width: 90vw;
        max-width: 340px;
      }
      .section-text {
        padding: 0 10px;
        max-width: 98vw;
        font-size: 1.08rem;
      }
    }

    @media (max-width: 1100px) {
      .hero-inner { 
        flex-direction: column; 
        gap: 32px; 
        padding: 0 2vw; 
      }
      .hero-content-block { 
        align-items: center; 
        text-align: center; 
      }
    }

    @media (max-width: 700px) {
      .hero-title { font-size: 2.1rem; }
      .hero-poster-img { width: 90vw; max-width: 340px; }
    }

    /* About mission background */
    .about-mission-bg {
      background: transparent;
      width: 100vw;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 0;
    }

    .about-mission-bg .section-block-split {
      background: transparent;
      margin: 0;
      padding: 18px 0 0 0;
      min-height: unset;
      border-radius: 0;
      box-shadow: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .about-mission-bg .section-block-split + .section-block-split {
      margin-top: -2px;
      padding-top: 0;
    }

    .about-mission-bg .section-title-split {
      text-align: center !important;
      font-size: 2.5rem;
      font-weight: 800;
      color: #17643a;
      margin-bottom: 12px;
      margin-top: 24px;
    }

    .about-mission-bg .section-title-split:first-child {
      border-bottom: 4px solid #1de982;
      display: inline-block;
      padding-bottom: 4px;
      margin-bottom: 18px;
    }

    .about-mission-bg .section-desc-split {
      text-align: center !important;
      font-size: 1.18rem;
      color: #234;
      margin-bottom: 0;
      margin-top: 0;
      max-width: 900px;
      line-height: 1.7;
    }

    @media (max-width: 900px) {
      .about-mission-bg .section-title-split {
        font-size: 1.5rem;
        margin-top: 18px;
      }
      .about-mission-bg .section-desc-split {
        font-size: 1rem;
        padding: 0 10px;
        max-width: 98vw;
      }
    }

    /* Secure footer */
    footer {
      padding: 30px;
      text-align: center;
      font-size: 1rem;
      box-shadow: 0 -2px 16px rgba(46,125,50,0.07);
      border-top: 2px solid var(--accent-color);
      background: var(--white);
      /* Security: Prevent text selection */
      -webkit-user-select: none;
      user-select: none;
    }

    /* Security-focused animations */
    @keyframes fadeInUp {
      from { 
        opacity: 0; 
        transform: translateY(40px); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }

    /* Secure image handling */
    .secure-img {
      /* Security: Prevent drag and drop attacks */
      -webkit-user-drag: none;
      -khtml-user-drag: none;
      -moz-user-drag: none;
      -o-user-drag: none;
      user-drag: none;
      /* Security: Prevent context menu */
      -webkit-context-menu: none;
      -moz-context-menu: none;
      -ms-context-menu: none;
      context-menu: none;
    }

    /* Security: Disable right-click on sensitive elements */
    .no-context-menu {
      -webkit-context-menu: none;
      -moz-context-menu: none;
      -ms-context-menu: none;
      context-menu: none;
    }
  </style>
</head>
<body>
  <div class="sectioned">
    <div class="hero">
      <div class="hero-inner">
        <div class="hero-content-block">
          <img src="healythu.png" alt="HealthyU Logo" class="hero-logo secure-img" />
          <div class="hero-title">Your smart gateway to <span class="highlight">healthy eating</span> in Egypt</div>
          <div class="hero-desc">Discover calorie-counted, nutritious meals from verified restaurants and home kitchens across Egypt. HealthyU is here to support your goals.</div>
          <div class="store-buttons">
            <a href="https://play.google.com/store/apps/details?id=com.healthyu.app&gl=eg" class="store-btn" target="_blank" rel="noopener noreferrer" aria-label="Download from Google Play Store">
              <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Get it on Google Play" height="54" class="secure-img">
            </a>
            <a href="https://apps.apple.com/eg/app/healthyu/id6745826971" class="store-btn" target="_blank" rel="noopener noreferrer" aria-label="Download from Apple App Store">
              <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on the App Store" height="54" class="secure-img">
            </a>
          </div>
        </div>
        <img src="poster.jpg" alt="HealthyU App Poster" class="hero-poster-img secure-img" />
      </div>
    </div>
    
    <div class="about-mission-bg">
      <div class="section-block-split" id="about-section">
        <div class="section-text fullwidth-text">
          <div class="section-title-split">About HealthyU</div>
          <div class="section-desc-split">HealthyU is your trusted destination for healthy meals, connecting users across Egypt with verified restaurants and home kitchens that provide calorie-counted, nutritious dishes. Whether you're eating clean, managing weight, or simply enjoying a better lifestyle, HealthyU is here to support your goals.</div>
        </div>
      </div>
      <div class="section-block-split reverse" id="mission-section">
        <div class="section-text fullwidth-text">
          <div class="section-title-split">Our Mission</div>
          <div class="section-desc-split">We aim to revolutionize the food delivery space by making healthy choices accessible, trackable, and rewarding for everyone. Through technology and partnerships, we help Egyptians embrace wellness, one meal at a time.</div>
        </div>
      </div>
      <div class="section-block-split" id="why-section">
        <div class="section-text fullwidth-text">
          <div class="section-title-split">Why Choose HealthyU?</div>
          <div class="section-desc-split">HealthyU stands out for its commitment to verified, nutritious options, transparent calorie information, and a seamless user experience. We partner only with trusted providers to ensure every meal supports your health goals.</div>
        </div>
      </div>
    </div>
    
    <div class="section-block-split" id="home-section">
      <div class="section-img">
        <img src="HealthyU%231.jpg" alt="Home Page" style="width:100%;height:auto;border-radius:24px;" class="secure-img">
      </div>
      <div class="section-text">
        <div class="section-title-split">Home Page</div>
        <div class="section-desc-split">The main screen where you can search for healthy restaurants, see your delivery address, and browse featured healthy food providers. Quick access to search and sort options.</div>
      </div>
    </div>
    
    <div class="section-block-split reverse" id="restaurant-section">
      <div class="section-img">
        <img src="HealthyU%232.jpg" alt="Restaurant Page" style="width:100%;height:auto;border-radius:24px;" class="secure-img">
      </div>
      <div class="section-text">
        <div class="section-title-split">Restaurant Page</div>
        <div class="section-desc-split">View a restaurant's profile, see their healthy food menu, packages, ratings, delivery fee, and nutritional details for each meal. Easily switch between meals and packages.</div>
      </div>
    </div>
    
    <div class="section-block-split" id="order-section">
      <div class="section-img">
        <img src="HealthyU%233.jpg" alt="Order in Restaurant" style="width:100%;height:auto;border-radius:24px;" class="secure-img">
      </div>
      <div class="section-text">
        <div class="section-title-split">Order in Restaurant</div>
        <div class="section-desc-split">Select and customize your meal or package from the restaurant's menu. View nutritional details and pricing before adding to your cart.</div>
      </div>
    </div>
    
    <div class="section-block-split reverse" id="cart-section">
      <div class="section-img">
        <img src="HealthyU%234.jpg" alt="Cart Screen" style="width:100%;height:auto;border-radius:24px;" class="secure-img">
      </div>
      <div class="section-text">
        <div class="section-title-split">Cart Screen</div>
        <div class="section-desc-split">Review your selected meals, see the total price, and proceed to checkout. Edit or remove items and view important order disclaimers.</div>
      </div>
    </div>
    
    <div class="section-block-split" id="fitness-section">
      <div class="section-img" style="display:flex;gap:24px;flex-wrap:wrap;justify-content:center;align-items:center;">
        <img src="HealthyU%237.jpg" alt="Fitness Calculator 1" style="width:290px;height:auto;border-radius:24px;" class="secure-img">
        <img src="HealthyU%235.jpg" alt="Fitness Calculator 2" style="width:290px;height:auto;border-radius:24px;" class="secure-img">
      </div>
      <div class="section-text">
        <div class="section-title-split">Calculate Your Fitness</div>
        <div class="section-desc-split">Input your gender, age, height, weight, and meals per day to get personalized meal recommendations. See your calculated daily nutritional goals and breakdowns based on your input. Visualize your daily calories, protein, carbs, and fats for your fitness journey.</div>
      </div>
    </div>
    
    <div class="section-block-split reverse" id="manual-section">
      <div class="section-img">
        <img src="HealthyU%236.jpg" alt="Manual Search" style="width:100%;height:auto;border-radius:24px;" class="secure-img">
      </div>
      <div class="section-text">
        <div class="section-title-split">Manual Search</div>
        <div class="section-desc-split">Find meals that match your specific nutritional requirements. Enter your target calories, protein, carbs, and fats to discover suitable meal options.</div>
      </div>
    </div>
  </div>
  
  <div class="policy-section">
    <span class="floating-emoji" style="top:10%;left:5%;">🥗</span>
    <span class="floating-emoji2" style="bottom:12%;right:7%;">💪</span>
    <div class="policy-title">Links & Policies</div>
    <div class="policy-buttons">
      <a href="privacy-policy.html" class="policy-btn" rel="noopener">Privacy Policy</a>
      <a href="terms-users.html" class="policy-btn" rel="noopener">User Terms & Conditions</a>
      <a href="terms-restaurants.html" class="policy-btn" rel="noopener">Restaurant Terms & Conditions</a>
      <a href="data-deletion.html" class="policy-btn" rel="noopener">Data Deletion Policy</a>
      <a href="support.html" class="policy-btn" rel="noopener">Support & Contact</a>
    </div>
  </div>
  
  <footer>
    &copy; 2025 HealthyU. All rights reserved.
  </footer>

  <!-- Security Monitor Script -->
  <script src="security-monitor.js"></script>
  
  <!-- Secure JavaScript with input validation and sanitization -->
  <script>
    // Security: Strict mode for better error handling
    'use strict';

    // Security: Input validation and sanitization function
    function sanitizeInput(input) {
      if (typeof input !== 'string') return '';
      return input.replace(/[<>]/g, '').trim();
    }

    // Security: Safe DOM manipulation
    function safeCreateElement(tag, attributes = {}) {
      const element = document.createElement(tag);
      for (const [key, value] of Object.entries(attributes)) {
        if (key === 'textContent') {
          element.textContent = sanitizeInput(value);
        } else if (key === 'innerHTML') {
          // Security: Avoid innerHTML for user content
          element.textContent = sanitizeInput(value);
        } else {
          element.setAttribute(key, sanitizeInput(value));
        }
      }
      return element;
    }

    // Security: Prevent right-click context menu
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      return false;
    });

    // Security: Prevent keyboard shortcuts that could be used maliciously
    document.addEventListener('keydown', function(e) {
      // Prevent F12, Ctrl+Shift+I, Ctrl+U, Ctrl+S
      if (e.key === 'F12' || 
          (e.ctrlKey && e.shiftKey && e.key === 'I') ||
          (e.ctrlKey && e.key === 'u') ||
          (e.ctrlKey && e.key === 's')) {
        e.preventDefault();
        return false;
      }
    });

    // Security: Safe event handling for mascot logo
    const mascotLogo = document.getElementById('mascot-logo');
    const mascotLogoBg = document.getElementById('mascot-logo-bg');
    const mascotWrap = document.getElementById('mascot-logo-wrap');
    
    if (mascotLogo && mascotLogoBg && mascotWrap) {
      let mascotDrag = false;
      let mascotOffset = {x: 0, y: 0};

      // Security: Input validation for mouse events
      function validateMouseEvent(e) {
        if (!e || typeof e.clientX !== 'number' || typeof e.clientY !== 'number') {
          return false;
        }
        return true;
      }

      mascotLogoBg.addEventListener('mousedown', function(e) {
        if (!validateMouseEvent(e)) return;
        
        mascotDrag = true;
        const rect = mascotWrap.getBoundingClientRect();
        mascotOffset.x = e.clientX - rect.left;
        mascotOffset.y = e.clientY - rect.top;
        mascotLogo.style.cursor = 'grabbing';
      });

      document.addEventListener('mousemove', function(e) {
        if (!mascotDrag || !validateMouseEvent(e)) return;
        
        // Security: Sanitize position values
        const newX = Math.max(0, Math.min(window.innerWidth - 100, e.clientX - mascotOffset.x));
        const newY = Math.max(0, Math.min(window.innerHeight - 100, e.clientY - mascotOffset.y));
        
        mascotWrap.style.left = newX + 'px';
        mascotWrap.style.top = newY + 'px';
        mascotWrap.style.right = 'auto';
        mascotWrap.style.bottom = 'auto';
        mascotWrap.style.position = 'fixed';
      });

      document.addEventListener('mouseup', function() {
        mascotDrag = false;
        if (mascotLogo) {
          mascotLogo.style.cursor = 'grab';
        }
      });

      mascotLogo.addEventListener('click', function(e) {
        // Security: Prevent event bubbling
        e.stopPropagation();
        
        // Spin animation
        mascotLogo.style.transition = 'transform 1.5s cubic-bezier(.68,-0.55,.27,1.55)';
        mascotLogo.style.transform = 'rotate(1440deg) scale(1.15)';
        
        setTimeout(function() {
          mascotLogo.style.transition = 'transform 0.3s';
          mascotLogo.style.transform = '';
        }, 1500);

        // Security: Safe nutrition icons creation
        const icons = [
          '⚡', '🥦', '🍗', '🥔', '🥚', '🥕', '🍅', '🍎', '🥑',
          '💪', '120g', '1540kcal', '45g', '32g', '60g protein', 'carbs', 'fiber'
        ];

        const rect = mascotLogo.getBoundingClientRect();
        
        for (let i = 0; i < icons.length; i++) {
          const zap = safeCreateElement('span', {
            textContent: icons[i],
            style: `
              position: fixed;
              left: ${rect.left + rect.width/2}px;
              top: ${rect.top + rect.height/2}px;
              fontSize: ${isNaN(icons[i]) && icons[i].length < 4 ? '2rem' : '1.1rem'};
              background: none;
              color: ${icons[i].match(/kcal|g|protein|carbs|fat|fiber/) ? '#b2ff59' : ''};
              borderRadius: 12px;
              padding: ${icons[i].match(/kcal|g|protein|carbs|fat|fiber/) ? '2px 8px' : '0'};
              pointerEvents: none;
              zIndex: 9999;
              transition: transform 2.2s cubic-bezier(.68,-0.55,.27,1.55), opacity 2.2s;
            `
          });

          document.body.appendChild(zap);

          // Security: Sanitize animation values
          const angle = Math.random() * 2 * Math.PI;
          const distance = 200 + Math.random() * 600;
          const x = Math.cos(angle) * distance;
          const y = Math.sin(angle) * distance;

          setTimeout(function() {
            zap.style.transform = `translate(${x}px,${y}px) scale(1.3)`;
            zap.style.opacity = 0;
          }, 10);

          setTimeout(function() {
            if (zap.parentNode) {
              zap.parentNode.removeChild(zap);
            }
          }, 2300);
        }
      });
    }

    // Security: Safe app screenshots handling
    const appScreenshots = Array.from(document.querySelectorAll('.app-screenshot'));
    
    function updateActiveScreenshot() {
      const appPreviewSection = document.querySelector('.app-preview');
      if (!appPreviewSection) return;
      
      const sectionTop = appPreviewSection.offsetTop;
      const sectionHeight = appPreviewSection.offsetHeight;
      const scrollY = window.scrollY;
      
      if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
        const progress = (scrollY - sectionTop) / sectionHeight;
        const idx = Math.min(
          Math.floor(progress * appScreenshots.length),
          appScreenshots.length - 1
        );
        
        appScreenshots.forEach(function(screenshot, i) {
          if (i === idx) {
            screenshot.classList.add('active');
          } else {
            screenshot.classList.remove('active');
          }
        });
      } else {
        appScreenshots.forEach(function(screenshot) {
          screenshot.classList.remove('active');
        });
      }
    }

    // Security: Throttled scroll event
    let scrollTimeout;
    window.addEventListener('scroll', function() {
      if (scrollTimeout) {
        clearTimeout(scrollTimeout);
      }
      scrollTimeout = setTimeout(updateActiveScreenshot, 16);
    });

    // Initialize
    updateActiveScreenshot();

    // Security: Prevent console access in production
    if (typeof console !== 'undefined') {
      console.log = function() {};
      console.warn = function() {};
      console.error = function() {};
    }
  </script>
</body>
</html>
